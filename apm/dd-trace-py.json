{
  "url": "https://api.github.com/repos/DataDog/dd-trace-py/releases/283407158",
  "assets_url": "https://api.github.com/repos/DataDog/dd-trace-py/releases/283407158/assets",
  "upload_url": "https://uploads.github.com/repos/DataDog/dd-trace-py/releases/283407158/assets{?name,label}",
  "html_url": "https://github.com/DataDog/dd-trace-py/releases/tag/v4.4.0",
  "id": 283407158,
  "author": {
    "login": "emmettbutler",
    "id": 723615,
    "node_id": "MDQ6VXNlcjcyMzYxNQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/723615?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/emmettbutler",
    "html_url": "https://github.com/emmettbutler",
    "followers_url": "https://api.github.com/users/emmettbutler/followers",
    "following_url": "https://api.github.com/users/emmettbutler/following{/other_user}",
    "gists_url": "https://api.github.com/users/emmettbutler/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/emmettbutler/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/emmettbutler/subscriptions",
    "organizations_url": "https://api.github.com/users/emmettbutler/orgs",
    "repos_url": "https://api.github.com/users/emmettbutler/repos",
    "events_url": "https://api.github.com/users/emmettbutler/events{/privacy}",
    "received_events_url": "https://api.github.com/users/emmettbutler/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "node_id": "RE_kwDOA6uE5s4Q5HM2",
  "tag_name": "v4.4.0",
  "target_commitish": "4.4",
  "name": "4.4.0",
  "draft": false,
  "immutable": false,
  "prerelease": false,
  "created_at": "2026-02-05T15:34:37Z",
  "updated_at": "2026-02-11T16:20:07Z",
  "published_at": "2026-02-05T16:11:29Z",
  "assets": [

  ],
  "tarball_url": "https://api.github.com/repos/DataDog/dd-trace-py/tarball/v4.4.0",
  "zipball_url": "https://api.github.com/repos/DataDog/dd-trace-py/zipball/v4.4.0",
  "body": "Estimated end-of-life date, accurate to within three months: 05-2027\r\nSee [the support level definitions](https://docs.datadoghq.com/tracing/trace_collection/compatibility/python/#releases) for more information.\r\n\r\n⚠️ We’re currently investigating an issue impacting services using ddtrace versions `v4.1.*` -> `v4.4.*` with profiling turned on. Our engineering teams are actively working on a permanent fix. In the meantime, disabling the memory profiler in the ddtrace configuration has been identified as a temporary workaround, `DD_PROFILING_MEMORY_ENABLED=false`.\r\n\r\n### New Features\r\n\r\n- LLM Observability\r\n  - Adds support for class-based evaluators in LLM Observability. Users can now define custom evaluators by subclassing the `BaseEvaluator` class, providing more flexibility and structure for implementing evaluation logic. The `EvaluatorContext` stores the context of the evaluation, including the dataset record and span information. Additionally, class-based summary evaluators are supported via `BaseSummaryEvaluator`, which receives a `SummaryEvaluatorContext` containing aggregated inputs, outputs, expected outputs, and per-row evaluation results.\r\n  - Adds support for running synchronous evaluators concurrently in experiments. Async evaluators are not supported.\r\n- logging\r\n  - Adds a new environment variable `DD_TRACE_LOG_LEVEL` to control the ddtrace logger level, following the log levels available in the logging module.\r\n- dynamic instrumentation\r\n  - added support for capture expressions in log probes.\r\n- AAP\r\n  - This introduces support for Local File Inclusion (LFI) detection in `pathlib.Path.open()` for App and API Protection Exploit Prevention.\r\n  - This introduces AAP support for tornado web framework. This must be explicitly enabled with `DD_TRACE_TORNADO_ENABLED=true` or `DD_PATCH_MODULES=tornado:true`\r\n\r\n### Bug Fixes\r\n\r\n- AAP\r\n  - Fixes an issue where agent-based samplers could interfere with Standalone App and API Protection. In standalone mode, a trace need to be sent every minute to keep the service enabled, agent-based samplers with low sample rates could reject traces before the custom App and API Protection sampler was evaluated.\r\n- aws_lambda\r\n  - This fix resolves an issue where user-defined SIGALRM handlers were not restored after TimeoutChannel cleanup, causing custom timeout handlers to stop working after the first Lambda invocation.\r\n- exception replay\r\n  - fix a gevent support issue that could cause an exception when Exception Replay tries to figure out if a frame belongs to user code for capturing.\r\n  - fix for errors while capturing exception replay snapshots.\r\n- litellm\r\n  - This fix resolves an issue where litellm\\>=1.74.15 wrapped router streaming responses in `FallbackStreamWrapper` (introduced for mid-stream fallback support) that caused an `AttributeError` when attempting to access the `.handler` attribute. The integration now gracefully handles both the original response format and wrapped responses by falling back to ddtrace's own stream wrapping when needed.\r\n- profiling\r\n  - A bug where non-pushed samples could leak data to subsequent samples has been fixed.\r\n  - A bug where `asyncio` task stacks could contain duplicated frames when the task was on-CPU is now fixed. The stack now correctly shows each frame only once.\r\n  - The stack Profiler now correctly resets thread, task, and greenlet information after a fork, preventing stale data from the parent process from affecting profiling in child processes.\r\n  - Fixed crash in lock profiler when stack traces are too shallow (less than 4 frames). This could occur during interpreter bootstrap, atexit callbacks, or other edge cases. In these rare scenarios, locks may now appear with location \"unknown:0\" in profiling data instead of causing application crashes.\r\n  - fixed an issue that causes greenlets to misbehave when `gevent.joinall` is called.\r\n  - This fix resolves a crash occurring when forking while using the memory profiler.\r\n  - The Profiler now always reports CPU time for threads, regardless of whether they are running when the sample is captured.\r\n  - This fix ensures the memory profiler clears its internal state immediately after fork in child processes via pthread_atfork. This prevents potential issues from stale data and prepares the codebase for future performance optimizations.\r\n- LLM Observability\r\n  - This fix resolves an issue where the Pydantic AI integration was not properly tracing the `StreamedRunResult.stream_responses()` method which was introduced in `pydantic-ai==0.8.1`. This was leading to agent spans not being finished.\r\n  - This fix addresses an issue where the evaluators argument type for `LLMObs.experiment` was overly constrained due to the use of an invariant List type. The argument now uses the covariant Sequence type, allowing users to pass in a list of evaluator functions with narrower return type.\r\n  - Fixes an issue where OpenAI spans would show <span class=\"title-ref\">model_name: \"None\"</span> instead of falling back to the request model if the API response returns a None model field. The model name now properly falls back to <span class=\"title-ref\">openai.request.model</span> or <span class=\"title-ref\">\"unknown_model\"</span> if both are unavailable.\r\n- celery\r\n  - This fix resolves panics in the NativeWriter caused by celery closing file descriptors when starting beat.\r\n- code origin\r\n  - remove noisy warning messages for non-callable view objects that cannot be instrumented.\r\n- dynamic instrumentation\r\n  - fixed an issue that prevented instrumented probes from being removed correctly when Dynamic Instrumentation is disabled remotely from the Datadog UI via the Settings page.\r\n- Data Streams Monitoring\r\n  - Fixes a regression introduced in v4.3.0 that prevented DSM from being automatically enabled for Kafka, AioKafka, Kombu, and Botocore integrations.\r\n"
}
